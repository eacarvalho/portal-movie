<div class="row">
  <div class="col-md-12" id="mensagens">
    <alert ng-repeat="alert in ctrl.alerts" type="{{alert.type}}" class="ns-alert"
           close="ctrl.closeMessage($index)">
      {{alert.msg}}
    </alert>
  </div>
</div>

<div class="white well">
  <div class="row">
    <div class="p-l-5">
      <div class="col-md-9" style="font-size: 1.5em;">
        <strong>
          <i class="md md-camera"></i>
          List of movies
        </strong>
      </div>
      <div class="col-md-3">
        <ui-select ng-model="ctrl.movie.selected"
                   on-select="ctrl.getByCode($select.selected.code)"
                   theme="bootstrap">
          <ui-select-match allow-clear="true" placeholder="Select or search a movie in the list...">
            {{$select.selected.title}}
          </ui-select-match>
          <ui-select-choices repeat="movie in ctrl.moviesCombo | filter: $select.search track by movie.code">
            <span ng-bind-html="movie.title | highlight: $select.search"></span>
          </ui-select-choices>
        </ui-select>
      </div>
    </div>
  </div>
</div>

<div class="white well col-md-9">
  <div class="row">
    <div class="col-md-12">
      <div class="table-responsive">
        <table st-table="result" st-safe-src="ctrl.movies" class="table table-striped">
          <thead>
          <tr>
            <th st-sort="title">Title</th>
            <th st-sort="originalTitle">Original Title</th>
            <th st-sort="year">Year</th>
            <th st-sort="rating">Rating</th>
            <th>Duration</th>
            <th st-sort="releasedDate">Released</th>
            <th>imdbID</th>
            <th>Imdb Rating</th>
          </tr>
          </thead>
          <tbody>
          <tr st-select-row="movie" ng-click="ctrl.rowSelected(movie)" ng-repeat="movie in result">
            <td>{{ movie.title }}</td>
            <td>{{ movie.originalTitle }}</td>
            <td>{{ movie.year }}</td>
            <td>{{ movie.rating }}</td>
            <td>{{ movie.duration }}</td>
            <td>{{ movie.releasedDate | date:'dd/MM/yyyy'}}</td>
            <td>{{ movie.imdbID }}</td>
            <td>{{ movie.imdbRating }}</td>
          </tr>
          </tbody>
          <tfoot>
          <tr>
            <td colspan="8" class="text-center">
              <div st-pagination="" st-items-by-page="10" st-displayed-pages="10"></div>
            </td>
          </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="white well col-md-3 pull-right" ng-show="ctrl.movie.selected.title !== undefined">
  <div class="row">
    <div class="card">
      <div class="card-image">
        <img ng-src="{{ctrl.movie.selected.poster}}">
        <span class="card-title">{{ctrl.movie.selected.title}}</span>
      </div>
      <div class="card-content">
        <p>{{ctrl.movie.selected.plot}}</p>
      </div>
    </div>
  </div>
</div>